// :mobile build.gradle
apply plugin: "com.android.application"

def androidxVersion = rootProject.ext.get('androidxVersion')
def retrofitVersion = rootProject.ext.get('retrofitVersion')

android {

    defaultConfig {

        applicationId rootProject.ext.get('applicationId')
        versionName rootProject.ext.get('versionName')
        versionCode rootProject.ext.get('versionCode')
        compileSdkVersion rootProject.ext.get('compileSdkVersion')
        targetSdkVersion rootProject.ext.get('targetSdkVersion')
        minSdkVersion rootProject.ext.get('minSdkVersion')

        testBuildType "debug"
        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
    }

    testOptions {
        resultsDir = "${project.buildDir}/results"
    }

    lintOptions {
        lintConfig rootProject.file('gradle/lint.xml')
        checkAllWarnings true
        warningsAsErrors true
        abortOnError false
        showAll false
    }

    dexOptions {
        javaMaxHeapSize '4572M'
        dexInProcess = true
    }

    dataBinding {
        enabled = true
    }

    signingConfigs {
        debug {

        }
        release {

        }
    }

    buildTypes {
        debug {
            applicationIdSuffix ".debug"
            signingConfig signingConfigs.debug
            testCoverageEnabled false
            minifyEnabled false
            debuggable true
            jniDebuggable true
            zipAlignEnabled true
            renderscriptDebuggable true
            pseudoLocalesEnabled false
            shrinkResources false
        }
        release {
            signingConfig signingConfigs.release
            proguardFile "${project.rootDir}/proguard/androidx.pro"
            proguardFile "${project.rootDir}/proguard/retrofit.pro"
            proguardFile "${project.rootDir}/proguard/mobile.pro"
            testCoverageEnabled false
            minifyEnabled true
            zipAlignEnabled true
            shrinkResources true
            pseudoLocalesEnabled false
            renderscriptDebuggable false
            jniDebuggable false
            debuggable false
        }
    }
}

dependencies {

    // https://developer.android.com/jetpack/androidx/
    api "androidx.appcompat:appcompat:1.0.2"
    api "android.arch.navigation:navigation-fragment:${androidxVersion}-alpha07"
    api "androidx.recyclerview:recyclerview:${androidxVersion}"
    api "androidx.annotation:annotation:${androidxVersion}"
    api "androidx.cardview:cardview:${androidxVersion}"

    // https://mvnrepository.com/artifact/com.google.code.gson/gson
    api "com.google.code.gson:gson:2.8.5"

    // https://mvnrepository.com/artifact/com.squareup.okhttp3/okhttp
    api "com.squareup.okhttp3:okhttp:3.11.0"

    // https://mvnrepository.com/artifact/com.squareup.retrofit2
    api ("com.squareup.retrofit2:retrofit:${retrofitVersion}") {
        exclude group: "com.squareup.okhttp3"
    }
    api ("com.squareup.retrofit2:converter-gson:${retrofitVersion}") {
        exclude group: "com.google.code.gson"
    }

    // https://mvnrepository.com/artifact/androidx.test
    androidTestImplementation "androidx.test:core:${androidxVersion}"
    androidTestImplementation "androidx.test:runner:1.1.0"
    androidTestImplementation "androidx.test:rules:1.1.0"

    // https://mvnrepository.com/artifact/androidx.test.ext
    androidTestImplementation "androidx.test.ext:junit:${androidxVersion}"
    // androidTestImplementation "androidx.test.ext:truth:${androidxVersion}"
    // androidTestImplementation "com.google.truth:truth:0.42"

    // https://mvnrepository.com/artifact/androidx.test.uiautomator/uiautomator
    androidTestImplementation "androidx.test.uiautomator:uiautomator:2.2.0"

    // https://mvnrepository.com/artifact/androidx.test.espresso
    // androidTestImplementation "androidx.test.espresso:espresso-core:3.1.0"
}
